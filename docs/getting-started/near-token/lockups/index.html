<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.9">
<title data-react-helmet="true">Lockups | NEAR Wiki</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://metaguild.github.io/near-wiki/docs/getting-started/near-token/lockups"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Lockups | NEAR Wiki"><meta data-react-helmet="true" name="description" content="These docs include information about lockups in general, how they are implemented on NEAR, some challenges this causes, and how you can delegate your locked tokens."><meta data-react-helmet="true" property="og:description" content="These docs include information about lockups in general, how they are implemented on NEAR, some challenges this causes, and how you can delegate your locked tokens."><link data-react-helmet="true" rel="shortcut icon" href="/near-wiki/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://metaguild.github.io/near-wiki/docs/getting-started/near-token/lockups"><link data-react-helmet="true" rel="alternate" href="https://metaguild.github.io/near-wiki/docs/getting-started/near-token/lockups" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://metaguild.github.io/near-wiki/docs/getting-started/near-token/lockups" hreflang="x-default"><link rel="stylesheet" href="/near-wiki/assets/css/styles.a34e08a1.css">
<link rel="preload" href="/near-wiki/assets/js/runtime~main.5f168199.js" as="script">
<link rel="preload" href="/near-wiki/assets/js/main.7e78b466.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/near-wiki/"><div class="navbar__logo"><img src="/near-wiki/img/logo.svg" alt="NEAR Logo" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/near-wiki/img/logo.svg" alt="NEAR Logo" class="themedImage_1VuW themedImage--dark_hz6m"></div><b class="navbar__title">NEAR Wiki</b></a><a class="navbar__item navbar__link navbar__link--active" href="/near-wiki/docs/intro">Welcome</a><a class="navbar__item navbar__link" href="/near-wiki/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/near/wiki" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_71bT toggle_3Zt9 toggleDisabled_3cF-"><div class="toggleTrack_32Fl" role="button" tabindex="-1"><div class="toggleTrackCheck_3lV7"><span class="toggleIcon_O4iE">ðŸŒœ</span></div><div class="toggleTrackX_S2yS"><span class="toggleIcon_O4iE">ðŸŒž</span></div><div class="toggleTrackThumb_xI_Z"></div></div><input type="checkbox" class="toggleScreenReader_28Tw" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_35hR" type="button"></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/near-wiki/docs/intro">Welcome to NEAR!</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/near-wiki/docs/SUMMARY">Table of contents</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">developer</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">founder</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">end-user</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">getting-started</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/near-wiki/docs/getting-started/grants-and-funding">Grants &amp; Funding</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/near-wiki/docs/getting-started/resources">Resources</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">ecosystem-success</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">near-token</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/near-wiki/docs/getting-started/near-token/README">NEAR Token</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/near-wiki/docs/getting-started/near-token/lockups">Lockups</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/near-wiki/docs/getting-started/near-token/token-balance">Token Balance</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/near-wiki/docs/getting-started/near-token/token-custody">Token Custody</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/near-wiki/docs/getting-started/near-token/delegation">Token Delegation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/near-wiki/docs/getting-started/near-token/whats-an-nft">What&#x27;s an NFT?</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">governance</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">governance-forum</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">guild</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">investor</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">news</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">resources</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">technology</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">validator</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Lockups</h1></header><p>These docs include information about lockups in general, how they are implemented on NEAR, some challenges this causes, and how you can delegate your locked tokens.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="lockup-basics">Lockup Basics<a aria-hidden="true" class="hash-link" href="#lockup-basics" title="Direct link to heading">â€‹</a></h2><p>A &quot;lockup&quot; is when tokens are prevented from being transferred. The configuration of this lockup may vary significantly from case to case, but the same smart contract is used for each of them. Accounts that are subject to a lockup have a different setup than accounts that are created without a lockup. If you have a locked-up account, it may be supported slightly differently by various tools (from wallets to delegation interfaces) because of this difference in the architecture.\
If you want to be sure to see the correct balances, use <a href="https://wallet.near.org" target="_blank" rel="noopener noreferrer">NEAR official wallet</a>.</p><p>The most common configuration of lockup is to linearly release the tokens for transfer during the entire term of the lockup. For example, a 24-month linear lockup would make a small amount of tokens eligible for transfer with each block that passes until the full amount is free to transfer at the end of 24 months.</p><p>Another factor in lockups is the &quot;cliff&quot;, which means that no tokens are unlocked until that date (often 12 months after the lockup start).\
On that date, a large chunk of tokens is unlocked at once to make it as if the cliff never existed at all.\
Most early accounts are subject to a cliff. For example, a 4-year linear lockup with a 1-year cliff will have the following characteristics:</p><ol><li>Months 0-12: all tokens are locked</li><li>Month 12+1 block: the first 25% of the tokens are immediately unlocked</li><li>Months 13-48: the remaining 75% of tokens are unlocked smoothly over each block of the remaining 36 months.</li><li>Months 48+: all tokens are unlocked</li></ol><p><em>See how NEAR tokens have been distributed and what lockups generally apply in </em><a href="https://near.org/blog/near-token-supply-and-distribution/" target="_blank" rel="noopener noreferrer"><em>this post</em></a><em>.</em></p><p><em>See the FAQ at the end for questions</em></p><h2 class="anchor anchorWithStickyNavbar_31ik" id="the-lockup-contract-at-near">The Lockup Contract at NEAR<a aria-hidden="true" class="hash-link" href="#the-lockup-contract-at-near" title="Direct link to heading">â€‹</a></h2><p><a href="https://github.com/near/core-contracts/tree/master/lockup" target="_blank" rel="noopener noreferrer">Lockup</a> is a special smart contract that ensures that the full, or the partial amount is not transferable until it is supposed to be.</p><p>The lockups are implemented as a separate smart contract from your main account. Thus, if you have received tokens prior to <a href="https://near.org/blog/near-mainnet-phase-2-unrestricted-decentralized/" target="_blank" rel="noopener noreferrer">Phase II</a>, you will get two things:</p><ol><li>A regular account (also called &quot;Owner Account&quot; in context of lockups), let&#x27;s say <code>user.near</code> or <code>3e52c197feb13fa457dddd102f6af299a5b63465e324784b22aaa7544a7d55fb</code>;</li><li>A lockup contract, with a name like <code>4336aba00d32a1b91d313c81e8544ea1fdc67284.lockup.near</code>.</li></ol><p>The owner account is created first, either by following the NEAR Drop process or by creating a new key pair using Trust, Ledger, or another wallet.</p><p>The lockup contract is then deployed with a predictable name. It is defined as <code>hash(owner_account_id)[:20]</code> encoded in <code>hex</code> and deployed as subaccount under <code>lockup.near</code>. It means that all lockup contracts are deployed to the accounts named with <code>.lockup.near</code> at the end.</p><p>If you have received additional tokens to the lockup account, they are considered unlocked and can be freely withdrawn. For example, any rewards that are earned using this lockup account (e.g. from delegation) or any other funds sent to this lockup contract can be withdrawn by the owner at any time.</p><p>The actual lockup release process happens on per block basis. E.g. if the release length is 1 calendar year, it will actually be <code>31,536,000</code> seconds, and with <!-- -->~<!-- -->1-second blocks, <code>~1/31,536,000</code> will be released per block. When the lockup has been fully released, the Owner Account can add the full-access key and withdraw all the funds from it.</p><p>The contract consists of lockup and vesting processes that go simultaneously. Both of these processes lock the tokens, but the mechanics slightly differ.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="lockup">Lockup<a aria-hidden="true" class="hash-link" href="#lockup" title="Direct link to heading">â€‹</a></h3><p>Lockup mechanics have 2 configurable parameters: 1. <code>lockup_timestamp</code> - The moment when tokens start linearly unlocking; 2. <code>release_duration</code> - The length of the unlocking schedule during which tokens are linearly unlocked. By the end of this duration, all tokens are unlocked.</p><p>The lockup process could not be terminated. Lockup does not have a cliff.</p><p>[<!-- -->deprecated] Apart from the lockup timestamp, there is a lockup duration. <code>lockup_duration</code> is the interval between <a href="https://near.org/blog/near-mainnet-phase-2-unrestricted-decentralized/" target="_blank" rel="noopener noreferrer">the Phase II launch</a> (October 13th) and the moment when tokens start to unlock.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="vesting">Vesting<a aria-hidden="true" class="hash-link" href="#vesting" title="Direct link to heading">â€‹</a></h3><p>Vesting also locks the tokens, and it allows configuring 2 more options: 1. Ability to terminate tokens vesting and refund non-vested tokens back. 2. Cliff vesting period.</p><p>Vesting process includes 3 timestamps: <code>start_date</code>, <code>cliff_date</code>, <code>end_date</code>.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="combinations">Combinations<a aria-hidden="true" class="hash-link" href="#combinations" title="Direct link to heading">â€‹</a></h3><p><code>v_start</code>, <code>v_cliff</code>, <code>v_end</code> are the aliases for vesting parameters; <code>l_start</code>, <code>l_end</code> are for lockup parameters. They could be easily transformed into initializing parameters described above.</p><p>The liquid tokens balance is always the minimum between unlocked and vested values.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="termination-of-vesting">Termination of vesting<a aria-hidden="true" class="hash-link" href="#termination-of-vesting" title="Direct link to heading">â€‹</a></h3><p>Vesting could be terminated by the foundation, an account configured at the moment of initializing the contract. It&#x27;s important to understand how the termination works combining with the lockup schedule.</p><p>At the moment of termination, we stop the vesting process, so the vested amount is going to remain constant after that; the lockup process keeps going and will unlock the tokens on its schedule. We continue to unlock the tokens as we normally do that by getting the minimum between unlocked and vested amounts.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="an-example">An Example<a aria-hidden="true" class="hash-link" href="#an-example" title="Direct link to heading">â€‹</a></h3><p>You can see examples of account and lockup setups in the <a href="https://explorer.mainnet.near.org" target="_blank" rel="noopener noreferrer">NEAR Explorer</a>.\
For example, this randomly chosen account <code>gio3gio.near</code> was created in several steps:</p><p>First, the Owner Account <code>gio3gio.near</code> was created and configured using several transactions, which you can see in <a href="https://explorer.mainnet.near.org/accounts/gio3gio.near" target="_blank" rel="noopener noreferrer">the account history</a>. It was created with 40 NEAR tokens to pay for the storage requirements of the account, and the two-factor authentication that is deployed to it.</p><p>Next, the account <a href="https://explorer.mainnet.near.org/accounts/9b84742f269952cea2877425b5e9d2e15cae8829.lockup.near" target="_blank" rel="noopener noreferrer">9b84742f269952cea2877425b5e9d2e15cae8829.lockup.near</a> was created to store the actual balance of locked tokens on the account in <a href="https://explorer.mainnet.near.org/transactions/Eer14Fih17TRjpiF8PwWfVKNTB57vXnNJsDW93iqc2Ui" target="_blank" rel="noopener noreferrer">a batch transaction</a> which also transferred these tokens to it (in this case, 594.11765 tokens).\
You can see the arguments for the <code>new</code> method in the explorer, which show a 12-month release duration with an initial cliff of October 4th:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly json"><pre tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;owner_account_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;gio3gio.near&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// the Owner account who is allowed to call methods on this one</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;lockup_duration&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">                    </span><span class="token comment" style="color:#999988;font-style:italic">// not necessary if the lockup_timestamp is used</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;lockup_timestamp&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1601769600000000000&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Unix timestamp for October 4th, 2020 at midnight UTC</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;transfers_information&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;TransfersDisabled&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;transfer_poll_account_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;transfer-vote.near&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;vesting_schedule&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token null keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;release_duration&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;31536000000000000&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 365 days</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;staking_pool_whitelist_account_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;lockup-whitelist.near&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;foundation_account_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token null keyword" style="color:#00009f">null</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>For the actual lockup contract code and README, <a href="https://github.com/near/core-contracts/tree/master/lockup" target="_blank" rel="noopener noreferrer">see it on Github</a>.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="delegating-locked-tokens">Delegating locked tokens<a aria-hidden="true" class="hash-link" href="#delegating-locked-tokens" title="Direct link to heading">â€‹</a></h2><p>One of the unique features of the NEAR lockups is the ability to delegate tokens while they are still locked.</p><p>There are few things to know: 1. You can only delegate to whitelisted pools, right now it&#x27;s all the pools that end with <code>.poolv1.near</code>. 2. One lockup contract can only delegate to a single pool. 3. The account must keep a minimum balance of 3.5 $NEAR to cover storage for the lockup contract itself (transactions that will try to withdraw over that amount will just fail). 4. Delegation rewards can be withdrawn back to the lockup contract but are unlocked, so they can be withdrawn from it right away. 5. Delegating commands/tools which are not specifically configured to work with locked-up accounts won&#x27;t work, as the &quot;owner account&quot; must call lockup contract. Currently, Dokia and NEAR Wallet are adding native support for lockup contract delegation.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="calling-arbitrary-methods">Calling Arbitrary Methods<a aria-hidden="true" class="hash-link" href="#calling-arbitrary-methods" title="Direct link to heading">â€‹</a></h2><p>Calling methods on the lockup contract is a bit more complicated than doing so on a normal contract because you will need to include the <code>accountId</code> option as well, which references the &quot;owner&quot; account for that lockup contract.\
This is because the lockup contract isn&#x27;t designed to do anything on its own; its methods need to be called from the perspective of the account which owns it.</p><p>Methods must be called using one of two options:</p><ol><li><code>near view ...</code>: these are simpler and don&#x27;t modify anything or cost anything</li><li><code>near call ...</code>: these do require more arguments and require gas</li></ol><p>Arguments are passed using a hash with string arguments inside single quotes, for example:</p><p><code>near call some_lockup some_method &#x27;{&quot;arg1&quot;: &quot;value1&quot;, &quot;arg2&quot;: &quot;value2&quot;}&#x27; --accountId=lockup_owner_account</code></p><p>View the <a href="https://github.com/near/core-contracts/tree/master/lockup" target="_blank" rel="noopener noreferrer">lockup github README</a> for the documentation and the examples.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="example-transferring-staking-reward-tokens-from-the-lockup">Example: Transferring staking reward tokens from the lockup<a aria-hidden="true" class="hash-link" href="#example-transferring-staking-reward-tokens-from-the-lockup" title="Direct link to heading">â€‹</a></h3><p>To illustrate a common case of calling lockup methods with arguments, this is an example of transferring NEAR tokens that were earned from staking out of a lockup contract and into another arbitrary account. We assume the following have already occurred:</p><ol><li>The tokens were unstaked from the pool (which takes a 4-epoch waiting period) using <code>unstake</code> or <code>unstake_all</code>;</li><li>The tokens were withdrawn from the pool to the lockup contract.</li></ol><p>For more information (or examples) on either of these steps, click on the &quot;Token Delegation&quot; link in the docs navigation above.</p><p>Now that the staking rewards are in your account, it requires several steps to transfer them out because some values need to be manually updated in the contracts.</p><p>The following steps will show how functions are called in the lockup contract while helping to illustrate a common use case. Of course, to simply transfer tokens that are already unlocked (not staking rewards), then skip to step 3.</p><h4 class="anchor anchorWithStickyNavbar_31ik" id="step-1-transfer-unlock-ping">Step 1: Transfer Unlock Ping<a aria-hidden="true" class="hash-link" href="#step-1-transfer-unlock-ping" title="Direct link to heading">â€‹</a></h4><p>Start by pinging the lockup contract to tell it that transfers are unlocked. This <em>only needs to be done once total</em>.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain"># replace some_lockup.lockup.near and lockup_owner.near with the appropriate accounts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">near call some_lockup.lockup.near check_transfers_vote &#x27;{}&#x27; --accountId=lockup_owner.near --gas=75000000000000 --useLedgerKey=&quot;44&#x27;/397&#x27;/0&#x27;/0&#x27;/1&#x27;&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>If you forget to do this, you might get an error like <code>panicked at &#x27;Transfers are disabled&#x27;, src/internal.rs:68:9</code>.</p><h4 class="anchor anchorWithStickyNavbar_31ik" id="step-2-refresh-the-staking-pool-balance">Step 2: Refresh the staking pool balance<a aria-hidden="true" class="hash-link" href="#step-2-refresh-the-staking-pool-balance" title="Direct link to heading">â€‹</a></h4><p>Next, refresh the staking pool balance, so the lockup understands that you aren&#x27;t trying to withdraw tokens beyond the amount which should still be locked.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">near call some_lockup.lockup.near refresh_staking_pool_balance &#x27;{}&#x27; --accountId=lockup_owner.near --gas=75000000000000 --useLedgerKey=&quot;44&#x27;/397&#x27;/0&#x27;/0&#x27;/1&#x27;&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>If you forget to do this, you might get an error like <code>panicked at &#x27;The available liquid balance &quot; 123456789 is smaller than the requested transfer amount 100000000000000000000000000</code>.</p><h4 class="anchor anchorWithStickyNavbar_31ik" id="step-3-transfer-the-tokens">Step 3: Transfer the tokens<a aria-hidden="true" class="hash-link" href="#step-3-transfer-the-tokens" title="Direct link to heading">â€‹</a></h4><p>Transfer 100 NEAR from <code>some_lockup.near</code> to <code>some_recipient.near</code>. Remember that, to be transferable, the tokens must either be unlocked or staking rewards earned on top of the locked balance.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">near call some_lockup.lockup.near transfer &#x27;{&quot;receiver_id&quot;: &quot;some_recipient.near&quot;, &quot;amount&quot;: &quot;100000000000000000000000000&quot;}&#x27; --accountId=lockup_owner.near --gas=50000000000000 --useLedgerKey=&quot;44&#x27;/397&#x27;/0&#x27;/0&#x27;/1&#x27;&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>If you forget to use the large amount of yoctoNEAR (e.g. you wrote &quot;1.5&quot; instead of &quot;1500000000000000000000000&quot;), you might get an error like <code>panicked at &#x27;Failed to deserialize input from JSON.: Error(&quot;invalid digit found in string&quot;, line: 1, column: 17)&#x27;</code></p><h2 class="anchor anchorWithStickyNavbar_31ik" id="frequent-questions">Frequent questions?<a aria-hidden="true" class="hash-link" href="#frequent-questions" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_31ik" id="i-dont-see-my-full-balance-in-my-wallet">I don&#x27;t see my full balance in my wallet<a aria-hidden="true" class="hash-link" href="#i-dont-see-my-full-balance-in-my-wallet" title="Direct link to heading">â€‹</a></h3><p>Not all wallets support looking up the locked-up balance.</p><p>There are three ways to go:</p><ul><li>Use the <a href="https://wallet.near.org" target="_blank" rel="noopener noreferrer">NEAR official wallet</a>;</li><li><a href="/near-wiki/docs/getting-started/near-token/token-custody#importing-accounts-from-other-wallets">Import your account into NEAR Wallet</a>; </li><li>Use CLI to check your balance: <code>near view &lt;LOCKUP_ACCOUNT_ID&gt; get_balance &#x27;&#x27;</code> (note it outputs the value in yoctoNEAR - divide by 10e24 to get NEAR amount).</li></ul><h3 class="anchor anchorWithStickyNavbar_31ik" id="how-do-i-delegate-locked-up-tokens">How do I delegate locked-up tokens?<a aria-hidden="true" class="hash-link" href="#how-do-i-delegate-locked-up-tokens" title="Direct link to heading">â€‹</a></h3><p>It&#x27;s important to note, that a single lockup contract can only delegate to a single validator.</p><p>Go to Dokia&#x27;s staking UI: <a href="https://staking.dokia.cloud/staking/near/validators" target="_blank" rel="noopener noreferrer">https://staking.dokia.cloud/staking/near/validators</a></p><ol><li>Select the validator you want to delegate;</li><li>Choose either to do it via Web Interface or CLI;</li><li>With NEAR Wallet or Ledger you can use Web Interface;</li><li>To use CLI, make sure you have <a href="https://github.com/near/near-cli" target="_blank" rel="noopener noreferrer">near-cli</a> installed and either use Ledger, have seed phrase, or have secret key locally.</li></ol><h3 class="anchor anchorWithStickyNavbar_31ik" id="if-i-have-a-lockup-what-do-i-need-to-do-to-transfer-my-tokens-once-they-are-available-from-the-wallet">If I have a lockup, what do I need to do to transfer my tokens once they are available from the Wallet?<a aria-hidden="true" class="hash-link" href="#if-i-have-a-lockup-what-do-i-need-to-do-to-transfer-my-tokens-once-they-are-available-from-the-wallet" title="Direct link to heading">â€‹</a></h3><p>If you use NEAR Wallet, you can just spend them as normal. You will just have to confirm a couple of extra transactions (&quot;check vote&quot; and &quot;transfer&quot;).\
Other wallets may implement this differently.</p><blockquote><p>Got a question?  <a href="https://stackoverflow.com/questions/tagged/nearprotocol" target="_blank" rel="noopener noreferrer">Ask it on StackOverflow!</a></p></blockquote></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/edit/main/website/docs/getting-started/near-token/lockups.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/near-wiki/docs/getting-started/near-token/README"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« <!-- -->NEAR Token</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/near-wiki/docs/getting-started/near-token/token-balance"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Token Balance<!-- --> Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#lockup-basics" class="table-of-contents__link toc-highlight">Lockup Basics</a></li><li><a href="#the-lockup-contract-at-near" class="table-of-contents__link toc-highlight">The Lockup Contract at NEAR</a><ul><li><a href="#lockup" class="table-of-contents__link toc-highlight">Lockup</a></li><li><a href="#vesting" class="table-of-contents__link toc-highlight">Vesting</a></li><li><a href="#combinations" class="table-of-contents__link toc-highlight">Combinations</a></li><li><a href="#termination-of-vesting" class="table-of-contents__link toc-highlight">Termination of vesting</a></li><li><a href="#an-example" class="table-of-contents__link toc-highlight">An Example</a></li></ul></li><li><a href="#delegating-locked-tokens" class="table-of-contents__link toc-highlight">Delegating locked tokens</a></li><li><a href="#calling-arbitrary-methods" class="table-of-contents__link toc-highlight">Calling Arbitrary Methods</a><ul><li><a href="#example-transferring-staking-reward-tokens-from-the-lockup" class="table-of-contents__link toc-highlight">Example: Transferring staking reward tokens from the lockup</a></li></ul></li><li><a href="#frequent-questions" class="table-of-contents__link toc-highlight">Frequent questions?</a><ul><li><a href="#i-dont-see-my-full-balance-in-my-wallet" class="table-of-contents__link toc-highlight">I don&#39;t see my full balance in my wallet</a></li><li><a href="#how-do-i-delegate-locked-up-tokens" class="table-of-contents__link toc-highlight">How do I delegate locked-up tokens?</a></li><li><a href="#if-i-have-a-lockup-what-do-i-need-to-do-to-transfer-my-tokens-once-they-are-available-from-the-wallet" class="table-of-contents__link toc-highlight">If I have a lockup, what do I need to do to transfer my tokens once they are available from the Wallet?</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/near-wiki/docs/intro">Welcome</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/nearprotocol" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://near.chat" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/NEARprotocol" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://near.org/blog" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog</a></li><li class="footer__item"><a href="https://github.com/near" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Near, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/near-wiki/assets/js/runtime~main.5f168199.js"></script>
<script src="/near-wiki/assets/js/main.7e78b466.js"></script>
</body>
</html>